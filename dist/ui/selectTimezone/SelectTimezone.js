import e from"../spinner/Spinner.js";import t from"../../utils/classNames.js";import a,{useState as s,useEffect as l}from"react";import n from"./selectTimezone.module.scss.js";const r=({label:r,size:o="md",name:c,disabled:i,error:m,helpText:p,value:d,loaderColor:u,onSelect:_,onBlur:f,onFocus:b})=>{const[h,v]=s(!1),[y,N]=s(""),[E,g]=s([]),z=e=>{const t=parseInt(String(e/60)),a=e-60*t;return`${e>0?"+":""}${t}:${Math.abs(a)?Math.abs(a)<10?"0"+Math.abs(a):Math.abs(a):"00"}`};return l((()=>{(async()=>{try{v(!0);const e=await fetch("http://graph.soppiya.biz/data",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({query:"query Get_timezones {\n  get_timezones {\n    _id\n    name\n    offset\n  }\n}",variables:{},operationName:"Get_timezones"})}),{data:{get_timezones:t}}=await e.json();v(!1),g(t.map((e=>({value:e._id,label:`${e.name} (GMT${z(e.offset)})`}))))}catch(e){return e}})()}),[]),l((()=>{d&&N(d)}),[d]),a.createElement("div",{className:n.wrapper},r&&a.createElement("div",{className:n.label_action_wrapper},r&&a.createElement("label",{className:t(n.label_text),htmlFor:c},r)),a.createElement("div",{className:t(n.select_field_wrapper,n[o+"_select"])},h?a.createElement("div",{className:t(n.select_field,n.spinner_center,n[o+"_select"])},a.createElement(e,{size:"xsm",color:u})):a.createElement("select",{className:t(n.select_field,m&&m.status&&n.error_style,n.prefix_icon_padding),disabled:i,value:y,onChange:e=>{const{value:t}=e.target;N(t),"function"==typeof _&&_(t)},onBlur:f,onFocus:b},E.map((e=>a.createElement("option",{key:e.value,value:e.value},e.label))))),p&&a.createElement("p",{className:n.help_text},p),m&&m.status&&a.createElement("p",{className:n.error_text}," ",m.message," "))};export{r as default};
//# sourceMappingURL=SelectTimezone.js.map
